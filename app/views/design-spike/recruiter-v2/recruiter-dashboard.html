{% extends "layout.html" %}

{% block pageTitle %}Recruiter Dashboard{% endblock %}

{% block content %}
  <h1 class="nhsuk-heading-xl">Recruiter dashboard</h1>

  <p class="nhsuk-body-l">Manage volunteer opportunities, applications, and shortlisted candidates.</p>

<!-- ðŸ“Œ Simplified Organisation Details Section -->
<div class="nhsuk-inset-text">
  <p><strong>Your organisation:</strong> South East NHS Community Volunteers</p>
  <p><a href="#" class="nhsuk-link">View organisation details</a></p>
</div>



  <!-- ðŸ“Œ Key Management Sections -->
  <div class="nhsuk-grid-row">
    
    <!-- ðŸ“Œ Applications Management -->
    <div class="nhsuk-grid-column-one-third">
      <div class="nhsuk-card nhsuk-u-margin-bottom-4">
        <div class="nhsuk-card__content">
          <h2 class="nhsuk-heading-m">New applications</h2>
          <p>You have <strong>3</strong> new applications awaiting review.</p>
          <a href="/design-spike/recruiter-v2/applications-management-new" class="nhsuk-button nhsuk-button--secondary">View applications</a>
        </div>
      </div>
    </div>

    <!-- ðŸ“Œ Shortlist Management -->
    <div class="nhsuk-grid-column-one-third">
      <div class="nhsuk-card nhsuk-u-margin-bottom-4">
        <div class="nhsuk-card__content">
          <h2 class="nhsuk-heading-m">Shortlisted candidates</h2>
          <p><strong>5</strong> candidates have been shortlisted for further review.</p>
          <a href="/design-spike/recruiter-v2/shortlist-management" class="nhsuk-button nhsuk-button--secondary">Manage shortlist</a>
        </div>
      </div>
    </div>

    <!-- ðŸ“Œ Current Roles Management -->
    <div class="nhsuk-grid-column-one-third">
      <div class="nhsuk-card nhsuk-u-margin-bottom-4">
        <div class="nhsuk-card__content">
          <h2 class="nhsuk-heading-m">Manage volunteer roles</h2>
          <p>View and manage all live and closed volunteer roles.</p>
          <a href="/design-spike/recruiter-v2/applications-management" class="nhsuk-button nhsuk-button--secondary">Manage roles</a>
        </div>
      </div>
    </div>

  </div>

  <!-- ðŸ“Œ List of Live Volunteer Roles -->
  <h2 class="nhsuk-heading-l">Your listings</h2>

  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-full">
      <table class="nhsuk-table" id="roles-table">
        <thead>
          <tr>
            <th onclick="sortTable(0)" style="cursor: pointer;">Title <span id="arrow-0">â–²</span></th>
            <th onclick="sortTable(1)" style="cursor: pointer;">Date created <span id="arrow-1">â–²</span></th>
            <th onclick="sortTable(2)" style="cursor: pointer;">Closing date <span id="arrow-2">â–²</span></th>
            <th onclick="sortTable(3)" style="cursor: pointer;">Applications received <span id="arrow-3">â–²</span></th>
            <th onclick="sortTable(4)" style="cursor: pointer;">Status <span id="arrow-4">â–²</span></th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><a href="/design-spike/recruiter-v2/manage-role">Walk and Talk Volunteer</a><br><span class="nhsuk-body-s">VCBSA-WTV-001</span></td>
            <td>19 March 2025</td>
            <td>30 April 2025</td>
            <td>3</td>
            <td><span class="nhsuk-tag nhsuk-tag--blue">Live</span></td>
          </tr>
          <tr>
            <td><a href="#">Hospital Reception Volunteer</a><br><span class="nhsuk-body-s">VCBSA-HRV-002</span></td>
            <td>18 March 2025</td>
            <td>25 April 2025</td>
            <td>3</td>
            <td><span class="nhsuk-tag nhsuk-tag--blue">Live</span></td>
          </tr>
          <tr>
            <td><a href="#">Ward Support Volunteer</a><br><span class="nhsuk-body-s">VCBSA-WSV-003</span></td>
            <td>15 March 2025</td>
            <td>20 April 2025</td>
            <td>7</td>
            <td><span class="nhsuk-tag nhsuk-tag--blue">Live</span></td>
          </tr>
          <tr>
            <td><a href="#">Check-in and Escort Volunteer</a><br><span class="nhsuk-body-s">VCBSA-CEV-004</span></td>
            <td>12 March 2025</td>
            <td>15 April 2025</td>
            <td>2</td>
            <td><span class="nhsuk-tag nhsuk-tag--grey">Closed</span></td>
          </tr>

        </tbody>
      </table>
    </div>
  </div>

  <script>
    function sortTable(columnIndex) {
      var table = document.getElementById("roles-table");
      var rows = Array.from(table.rows).slice(1);
      var currentArrow = document.getElementById("arrow-" + columnIndex);
      var isAscending = currentArrow.innerText === "â–²";

      var sortedRows = rows.sort((rowA, rowB) => {
        var cellA = rowA.cells[columnIndex].innerText.toLowerCase();
        var cellB = rowB.cells[columnIndex].innerText.toLowerCase();
        
        if (!isNaN(cellA) && !isNaN(cellB)) {
          return isAscending ? Number(cellA) - Number(cellB) : Number(cellB) - Number(cellA);
        }
        return isAscending ? cellA.localeCompare(cellB) : cellB.localeCompare(cellA);
      });

      // Toggle sorting direction
      currentArrow.innerText = isAscending ? "â–¼" : "â–²";

      sortedRows.forEach(row => table.appendChild(row));
    }
  </script>
  

{% endblock %}
