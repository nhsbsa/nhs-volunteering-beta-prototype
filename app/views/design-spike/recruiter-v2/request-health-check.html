{% extends "layout.html" %}

{% block pageTitle %}Request Health Check{% endblock %}

{% block content %}
  <a href="/design-spike/recruiter-v2/volunteer-profile-new" class="nhsuk-back-link">Back to Volunteer profile</a>

  <h1 class="nhsuk-heading-xl">Request health check</h1>

  <p>You are about to request an occupational health check for <strong>John Doe</strong>. The volunteer must receive an email with instructions. Select an email template below and click "Copy Email" to paste it into your email client.</p>

  <div class="nhsuk-form-group">
    <label class="nhsuk-label" for="email-template">
      Select an email template:
    </label>
    <select class="nhsuk-select" id="email-template" name="email-template" onchange="updateEmailPreview()">
      <option value="standard" selected>Standard request</option>
      <option value="urgent">Urgent follow-Up</option>
      <option value="reminder">Gentle reminder</option>
    </select>
  </div>

  <h2 class="nhsuk-heading-m">Email preview</h2>
  <div class="nhsuk-card nhsuk-u-padding-3 nhsuk-u-background-color-light-grey" id="email-preview">
    <p><strong>Subject:</strong> Health check required for your Volunteer role</p>
    <p>Dear John Doe,</p>
    <p>As part of your onboarding for the Ward Support Volunteer role, you need to complete an occupational health check. Please follow the instructions provided in the email you will receive shortly from our occupational health team.</p>
    <p>If you have any questions, feel free to reply to this email.</p>
    <p>Best regards,<br>Recruitment Team</p>
  </div>

  <textarea id="email-text" class="nhsuk-textarea nhsuk-u-visually-hidden"></textarea>

  <button class="nhsuk-button nhsuk-button--secondary" onclick="copyEmail()">Copy email</button>
  <a href="/design-spike/recruiter-v2/volunteer-profile-new" class="nhsuk-button nhsuk-button--secondary">Cancel</a>

  <script>
    function updateEmailPreview() {
      let template = document.getElementById("email-template").value;
      let preview = document.getElementById("email-preview");
      let emailText = document.getElementById("email-text");

      let emailTemplates = {
        "standard": `
        <p><strong>Subject:</strong> Health Check Required for Your Volunteer Role</p>
        <p>Dear John Doe,</p>
        <p>As part of your onboarding for the Ward Support Volunteer role, you need to complete an occupational health check. Please follow the instructions provided in the email you will receive shortly from our occupational health team.</p>
        <p>If you have any questions, feel free to reply to this email.</p>
        <p>Best regards,<br>Recruitment Team</p>
        `,
        "urgent": `
        <p><strong>Subject:</strong> URGENT: Immediate Health Check Required</p>
        <p>Dear John Doe,</p>
        <p>This is a reminder that your occupational health check must be completed as soon as possible. Without this, we cannot progress your application.</p>
        <p>Please complete the health check as soon as possible. Let us know if you need any assistance.</p>
        <p>Best regards,<br>Recruitment Team</p>
        `,
        "reminder": `
        <p><strong>Subject:</strong> Reminder: Health Check Required</p>
        <p>Dear John Doe,</p>
        <p>Just a friendly reminder that you need to complete your occupational health check. Once completed, we can proceed with your volunteer application.</p>
        <p>If you have already completed it, please disregard this email.</p>
        <p>Best regards,<br>Recruitment Team</p>
        `
      };

      preview.innerHTML = emailTemplates[template];
      emailText.value = emailTemplates[template].replace(/<\/?p>/g, "").replace(/<br>/g, "\n");
    }

    function copyEmail() {
      let emailText = document.getElementById("email-text");
      emailText.select();
      document.execCommand("copy");
      alert("Email copied to clipboard! Paste it into your email client.");
    }
  </script>

{% endblock %}
